(()=>{"use strict";const e="popup_is-opened",t="."+e,n="popup_is-animated";function o(){const e=document.querySelector(t);null!==e&&c(e)}function c(t){t.classList.contains("popup")&&t.classList.remove(e,n),document.removeEventListener("keydown",s)}function r(t){t.classList.add(n),setTimeout((()=>{t.classList.add(e)}),1),document.addEventListener("keydown",s)}function s(e){"Escape"===e.key&&o()}const a=document.querySelector(".popup_type_image"),d=a.querySelector(".popup__image"),i=a.querySelector(".popup__caption"),l=document.querySelector(".profile__title"),u=document.querySelector(".profile__description"),p=document.forms["edit-profile"],m=document.querySelector(".profile__add-button"),_=document.querySelector(".profile__edit-button"),y=document.querySelector(".popup_type_edit"),v=document.forms["new-place"],k=document.querySelector(".places__list"),f=document.querySelector(".popup_type_new-card"),q={rmFunc:function(e){e.remove()},likeFunc:function(e){e.querySelector(".card__like-button").classList.toggle("card__like-button_is-active")},handleImageClick:function(e,t,n){n.addEventListener("click",(()=>{d.src=e,d.alt=t,i.textContent=t,r(a)}))}};function S(e,t,n,o="prepend"){const c=function(e,t,n){const o=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0),c=o.querySelector(".card__image");return c.src=t,c.alt=e,o.querySelector(".card__title").textContent=e,n.handleImageClick(t,e,c),o.querySelector(".card__delete-button").addEventListener("click",(()=>{n.rmFunc(o)})),o.querySelector(".card__like-button").addEventListener("click",(()=>{n.likeFunc(o)})),o}(e,t,n);k[o](c)}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((e=>{S(e.name,e.link,q,"append")})),p.addEventListener("submit",(function(e){e.preventDefault();const t=p.name.value,n=p.description.value;l.textContent=t,u.textContent=n,o()})),_.addEventListener("click",(()=>{var e;(e=p).name.value=l.textContent,e.description.value=u.textContent,r(y)})),v.addEventListener("submit",(function(e){e.preventDefault(),S(v["place-name"].value,v.link.value,q),v.reset(),o()})),m.addEventListener("click",(()=>{r(f)})),document.querySelectorAll(".popup").forEach((t=>{t.addEventListener("mousedown",(n=>{n.target.classList.contains("popup__close")&&c(t),n.target.classList.contains(e)&&c(t)}))}))})();